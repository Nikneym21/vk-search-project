# HotkeysPlugin

## –û–ø–∏—Å–∞–Ω–∏–µ

HotkeysPlugin ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–≥–∏–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Ä—è—á–∏–º–∏ –∫–ª–∞–≤–∏—à–∞–º–∏ –≤ tkinter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, —Å –æ—Å–æ–±–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π macOS.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéÆ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏**

**macOS (‚åò):**
- `‚åò+C` ‚Äî –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
- `‚åò+V` ‚Äî –í—Å—Ç–∞–≤–∏—Ç—å
- `‚åò+X` ‚Äî –í—ã—Ä–µ–∑–∞—Ç—å
- `‚åò+A` ‚Äî –í—ã–¥–µ–ª–∏—Ç—å –≤—Å–µ
- `‚åò+Z` ‚Äî –û—Ç–º–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ Text)
- `‚åò+Y` ‚Äî –ü–æ–≤—Ç–æ—Ä (—Ç–æ–ª—å–∫–æ Text)

**Windows/Linux (Ctrl):**
- `Ctrl+C` ‚Äî –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
- `Ctrl+V` ‚Äî –í—Å—Ç–∞–≤–∏—Ç—å
- `Ctrl+X` ‚Äî –í—ã—Ä–µ–∑–∞—Ç—å
- `Ctrl+A` ‚Äî –í—ã–¥–µ–ª–∏—Ç—å –≤—Å–µ
- `Ctrl+Z` ‚Äî –û—Ç–º–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ Text)
- `Ctrl+Y` ‚Äî –ü–æ–≤—Ç–æ—Ä (—Ç–æ–ª—å–∫–æ Text)

### üîß **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∏–¥–∂–µ—Ç—ã**

- **Entry** ‚Äî –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –ø–æ–ª—è –≤–≤–æ–¥–∞
- **Text** ‚Äî –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è

### üöÄ **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**

- ‚úÖ **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –û–°** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- ‚úÖ **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–¥–µ–ª–µ–Ω–∏—è** ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫** ‚Äî –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã try/catch –±–ª–æ–∫–∞–º–∏
- ‚úÖ **–í–æ–∑–≤—Ä–∞—Ç "break"** ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **–ú–∞—Å—Å–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –≤–∏–¥–∂–µ—Ç–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```python
class HotkeysPlugin(BasePlugin):
    def register_widget(widget, widget_type="auto") -> bool
    def register_multiple_widgets(widgets: List) -> int
    def get_statistics() -> dict
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏
```python
plugin_priorities = {
    'hotkeys': 2,  # –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ä–∞–Ω–æ, –Ω–æ –ø–æ—Å–ª–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –í PluginManager

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
PLUGIN_CLASSES = {
    "hotkeys": HotkeysPlugin,
}
```

### –í GUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö

```python
def _setup_hotkeys(self):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à —á–µ—Ä–µ–∑ HotkeysPlugin"""
    hotkeys_plugin = self.plugin_manager.get_plugin("hotkeys")
    if hotkeys_plugin:
        widgets = [self.entry1, self.text1, self.entry2]
        success_count = hotkeys_plugin.register_multiple_widgets(widgets)
        print(f"üéÆ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ {success_count} –≤–∏–¥–∂–µ—Ç–æ–≤")
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
self.is_macos = platform.system() == "Darwin"
self.modifier_key = "Command" if self.is_macos else "Control"
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```python
stats = hotkeys_plugin.get_statistics()
# {
#   "registered_widgets": 5,
#   "platform": "Darwin",
#   "modifier_key": "Command",
#   "is_macos": True
# }
```

## –ú–µ—Ç–æ–¥—ã –ø–ª–∞–≥–∏–Ω–∞

### `register_widget(widget, widget_type="auto")`

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–¥–∏–Ω –≤–∏–¥–∂–µ—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `widget` ‚Äî –≤–∏–¥–∂–µ—Ç tkinter (Entry –∏–ª–∏ Text)
- `widget_type` ‚Äî —Ç–∏–ø –≤–∏–¥–∂–µ—Ç–∞ ("entry", "text", "auto")

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `bool` ‚Äî —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### `register_multiple_widgets(widgets)`

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–∂–µ—Ç–æ–≤ —Å—Ä–∞–∑—É.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `widgets` ‚Äî —Å–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `int` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–æ–≤

### `get_statistics()`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–ª–∞–≥–∏–Ω–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `dict` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–∞—Ö –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```python
class MyInterface:
    def __init__(self, parent_frame, plugin_manager):
        self.plugin_manager = plugin_manager
        self.setup_ui()
        self._setup_hotkeys()

    def setup_ui(self):
        # –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤
        self.entry1 = ttk.Entry(...)
        self.text1 = tk.Text(...)

    def _setup_hotkeys(self):
        hotkeys_plugin = self.plugin_manager.get_plugin("hotkeys")
        if hotkeys_plugin:
            widgets = [self.entry1, self.text1]
            hotkeys_plugin.register_multiple_widgets(widgets)
```

### –ü—Ä–∏–º–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–æ–≤

```python
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Entry
success = hotkeys_plugin.register_widget(my_entry, "entry")

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Text
success = hotkeys_plugin.register_widget(my_text, "text")

# –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞
success = hotkeys_plugin.register_widget(widget, "auto")
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –ø–ª–∞–≥–∏–Ω–∞:**
```python
hotkeys_plugin = plugin_manager.get_plugin("hotkeys")
if not hotkeys_plugin:
    print("‚ùå HotkeysPlugin –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω")
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤–∏–¥–∂–µ—Ç–æ–≤:**
```python
stats = hotkeys_plugin.get_statistics()
print(f"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ: {stats['registered_widgets']} –≤–∏–¥–∂–µ—Ç–æ–≤")
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É:**
```python
print(f"–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: {stats['platform']}")
print(f"–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä: {stats['modifier_key']}")
```

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –≥–æ—Ä—è—á–∏–º–∏ –∫–ª–∞–≤–∏—à–∞–º–∏

HotkeysPlugin –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–∏–≤—è–∑–∫–∏ tkinter –Ω–∞ macOS, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

### –ü—Ä–æ–±–ª–µ–º—ã —Å Focus

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∏–¥–∂–µ—Ç –∏–º–µ–µ—Ç —Ñ–æ–∫—É—Å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ macOS

```python
def _setup_macos_widget(self, widget):
    # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–∏–≤—è–∑–æ–∫
    widget.unbind_class("Text", "<Command-a>")
    widget.unbind_class("Entry", "<Command-a>")
    # ... –¥—Ä—É–≥–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ –º–µ—Ç–æ–¥—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –æ—à–∏–±–æ–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç "break" –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è.

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π

## –ñ—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–ª–∞–≥–∏–Ω –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:

```
üéÆ –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è Command
‚úÖ –í–∏–¥–∂–µ—Ç entry –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
‚úÖ –í–∏–¥–∂–µ—Ç text –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
üìä –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω —Ç–µ–∫—Å—Ç (25 —Å–∏–º–≤–æ–ª–æ–≤)
üìä –í—Å—Ç–∞–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç (10 —Å–∏–º–≤–æ–ª–æ–≤)
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

HotkeysPlugin –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—É—é –∏ –Ω–∞–¥–µ–∂–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à –≤–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å –æ—Å–æ–±—ã–º –≤–Ω–∏–º–∞–Ω–∏–µ–º –∫ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å macOS.
